{"version":3,"sources":["../../../../widgets/IMDC/widgets/ReachSelector.js"],"names":["define","declare","Evented","_WidgetsInTemplateMixin","_WidgetBase","_TemplatedMixin","template","domConstruct","GraphicsLayer","Graphic","SimpleMarkerSymbol","SimpleLineSymbol","Color","templateString","baseClass","widgetsInTemplate","postCreate","inherited","arguments","radioInputs","highlightSymbol","STYLE_CIRCLE","STYLE_SOLID","highlightLayer","map","addLayer","createRadioSelections","graphics","layer","destroy","removeLayer","forEach","graphic","labelNode","create","innerHTML","attributes","RouteReach","mouseover","evt","highlight","bind","mouseout","clearHighlight","style","inputNode","type","name","value","push","place","radiosWrapper","clear","highlightGraphic","geometry","add","console","error","goButtonClickHandler","radioElement","checked","splitParts","split","length","emit"],"mappings":"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","file":"ReachSelector.js","sourcesContent":["define([\r\n  'dojo/_base/declare',\r\n  'dojo/Evented',\r\n    'dijit/_WidgetsInTemplateMixin',\r\n    'dijit/_WidgetBase',\r\n    'dijit/_TemplatedMixin',\r\n    'dojo/text!./templates/ReachSelector.html',\r\n\r\n    'dojo/dom-construct',\r\n\r\n    'esri/layers/GraphicsLayer',\r\n    'esri/graphic',\r\n    \"esri/symbols/SimpleMarkerSymbol\", \"esri/symbols/SimpleLineSymbol\", \"esri/Color\",\r\n], function(\r\n  declare, Evented, _WidgetsInTemplateMixin, _WidgetBase, _TemplatedMixin, template,\r\n  domConstruct,\r\n  GraphicsLayer, Graphic, SimpleMarkerSymbol, SimpleLineSymbol, Color,\r\n  ) {\r\n  return declare([_WidgetBase, Evented, _TemplatedMixin, _WidgetsInTemplateMixin], {\r\n    templateString: template,\r\n    baseClass: 'reachSelector',\r\n    widgetsInTemplate: true,\r\n\r\n    \r\n    // gets called with the widget starts up\r\n    postCreate: function() {\r\n      this.inherited(arguments);\r\n\r\n      this.radioInputs = [];\r\n\r\n      // highlight symbol:\r\n      this.highlightSymbol = new SimpleMarkerSymbol(SimpleMarkerSymbol.STYLE_CIRCLE, 20,\r\n        new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID,\r\n        new Color([255,0,0]), 1),\r\n        new Color([0,255,0,0.50]));\r\n    \r\n      \r\n      // create the layer to show the highlight\r\n      this.highlightLayer = new GraphicsLayer();\r\n      this.map.addLayer(this.highlightLayer);\r\n\r\n      this.createRadioSelections(this.graphics, this.layer);\r\n    },\r\n\r\n    // Cleanup and destroy the widget\r\n    destroy: function() {\r\n      this.inherited(arguments);\r\n      if(this.highlightLayer) {\r\n        this.map.removeLayer(this.highlightLayer);\r\n        this.highlightLayer = null;\r\n      }\r\n    },\r\n\r\n    // Creates a radio button for each graphic.\r\n    createRadioSelections: function(graphics, layer) {\r\n      graphics.forEach(function(graphic) {\r\n        var labelNode = domConstruct.create('label', {\r\n          innerHTML: ' ' + graphic.attributes.RouteReach,\r\n          mouseover: function(evt) {\r\n            this.highlight(graphic);\r\n          }.bind(this),\r\n\r\n          mouseout: function(evt) {\r\n            this.clearHighlight();\r\n          }.bind(this),\r\n\r\n          style: 'display:block'\r\n        });\r\n        var inputNode = domConstruct.create('input', {\r\n          type: 'radio',\r\n          name: 'opts',\r\n          value: graphic.attributes.RouteReach,\r\n        });\r\n        this.radioInputs.push(inputNode);\r\n\r\n        domConstruct.place(inputNode, labelNode, 'first');\r\n        domConstruct.place(labelNode, this.radiosWrapper, 'last');\r\n      }.bind(this));\r\n    },\r\n\r\n    // Highlight a point on the map\r\n    highlight: function(graphic) {\r\n      if(this.highlightLayer && this.highlightSymbol) {\r\n        this.highlightLayer.clear();\r\n        var highlightGraphic = new Graphic(graphic.geometry, this.highlightSymbol);\r\n        this.highlightLayer.add(highlightGraphic);\r\n      } else {\r\n        console.error('error - could not find layer and symbol');\r\n      }\r\n    },\r\n\r\n    // Clear all highlights on the map\r\n    clearHighlight: function() {\r\n      if(this.highlightLayer) {\r\n        this.highlightLayer.clear();\r\n      }\r\n    },\r\n\r\n    goButtonClickHandler: function() {\r\n      this.radioInputs.forEach(function(radioElement) {\r\n        if(radioElement.checked) {\r\n          var splitParts = radioElement.value.split('_');\r\n          if(splitParts.length === 2) {\r\n            this.emit('reachChosen', splitParts[1]);\r\n          } else {\r\n            console.error('reach name not found - no split method', splitParts);\r\n          }\r\n        }\r\n      }.bind(this));\r\n    }\r\n  });\r\n})"]}